<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>EcoWatt - AI-Powered Energy Management</title>
    <meta name="description" content="AI-powered energy management platform for Zimbabwe's prepaid electricity system">
    <meta name="theme-color" content="#0C6B3C">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="icon" type="image/svg+xml" href="./favicon.svg">
    <link rel="manifest" href="./manifest.json">
    
    <!-- Professional External Resources -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { 'inter': ['Inter', 'sans-serif'] },
                    colors: {
                        primary: { 400: '#4ade80', 500: '#22c55e', 600: '#16a34a', 700: '#15803d' },
                        secondary: { 400: '#fbbf24', 500: '#f59e0b' },
                        accent: { 400: '#8b5cf6', 500: '#7c3aed' },
                        darkBg: '#0F0F23', darkCard: '#1A1A2E'
                    }
                }
            }
        };
    </script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        
        * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #0F0F23 0%, #1A1A2E 100%);
            color: white; min-height: 100vh; overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
        }

        /* Professional Design System */
        .glass-card {
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.12);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border-radius: 24px;
        }
        .glass-card:hover { transform: translateY(-4px); border-color: rgba(34, 197, 94, 0.3); }

        /* Professional Button System */
        .btn-primary {
            background: linear-gradient(135deg, #22c55e, #16a34a);
            color: white; border: none; border-radius: 16px; padding: 16px 32px;
            font-weight: 600; font-size: 16px; cursor: pointer;
            transition: all 0.3s ease; display: flex; align-items: center; justify-content: center;
            box-shadow: 0 8px 25px rgba(34, 197, 94, 0.25);
        }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 12px 35px rgba(34, 197, 94, 0.35); }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1); color: white; border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 16px; padding: 16px 32px; font-weight: 600; cursor: pointer;
            transition: all 0.3s ease; backdrop-filter: blur(10px);
        }
        .btn-secondary:hover { background: rgba(255, 255, 255, 0.15); transform: translateY(-2px); }

        /* Enhanced Input System */
        .input-enhanced {
            background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px; padding: 18px 20px; color: white; font-size: 16px;
            transition: all 0.3s ease; width: 100%; backdrop-filter: blur(10px);
        }
        .input-enhanced:focus {
            border-color: #22c55e; box-shadow: 0 0 0 2px rgba(34, 197, 94, 0.2);
            outline: none; background: rgba(255, 255, 255, 0.08);
        }
        .input-enhanced::placeholder { color: rgba(255, 255, 255, 0.5); }

        /* Screen System */
        .screen { display: none; opacity: 0; transition: all 0.4s ease; }
        .screen.active { display: block; opacity: 1; animation: slideIn 0.6s ease-out; }
        .onboarding-screen { display: none; min-height: 100vh; }
        .onboarding-screen.active { display: flex; animation: slideIn 0.6s ease-out; }
        .onboarding-slide { display: none; width: 100%; }
        .onboarding-slide.active { display: flex; animation: slideIn 0.4s ease-out; }

        @keyframes slideIn { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }

        /* Progress Indicators */
        .progress-dot { width: 8px; height: 8px; border-radius: 50%; transition: all 0.3s ease; }
        .progress-dot.active { width: 32px; background: linear-gradient(90deg, #22c55e, #8b5cf6); }
        .progress-dot:not(.active) { background: rgba(255, 255, 255, 0.3); }

        /* Navigation Enhancement */
        .nav-item { transition: all 0.3s ease; position: relative; padding: 12px; border-radius: 12px; }
        .nav-item.active { color: #22c55e; background: rgba(34, 197, 94, 0.1); }
        .nav-item:not(.active) { color: rgba(255, 255, 255, 0.6); }

        /* Enhanced Energy Meter */
        .energy-meter { width: 240px; height: 240px; margin: 2rem auto; position: relative; }
        .meter-glow {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            width: 220px; height: 220px; border-radius: 50%;
            background: radial-gradient(circle, rgba(34, 197, 94, 0.15) 0%, transparent 70%);
            animation: pulse 3s ease-in-out infinite;
        }

        @keyframes pulse { 0%, 100% { transform: translate(-50%, -50%) scale(1); opacity: 0.7; } 50% { transform: translate(-50%, -50%) scale(1.05); opacity: 1; } }

        /* Device Cards */
        .device-card {
            background: rgba(255, 255, 255, 0.06); border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px; padding: 16px; transition: all 0.3s ease;
        }
        .device-card:hover { transform: translateY(-2px); border-color: rgba(34, 197, 94, 0.3); }

        /* Toast System */
        .toast {
            position: fixed; bottom: 100px; left: 50%; transform: translateX(-50%) translateY(20px);
            background: linear-gradient(135deg, rgba(34, 197, 94, 0.95), rgba(22, 163, 74, 0.95));
            backdrop-filter: blur(20px); color: white; padding: 16px 24px; border-radius: 16px;
            font-weight: 600; z-index: 1000; opacity: 0; transition: all 0.4s ease;
            border: 1px solid rgba(34, 197, 94, 0.3); max-width: 90vw;
        }
        .toast.show { opacity: 1; transform: translateX(-50%) translateY(0); }
        .toast.success { background: linear-gradient(135deg, rgba(34, 197, 94, 0.95), rgba(22, 163, 74, 0.95)); }
        .toast.error { background: linear-gradient(135deg, rgba(239, 68, 68, 0.95), rgba(220, 38, 38, 0.95)); }

        /* Mobile Optimizations */
        @media (max-width: 768px) {
            .glass-card { margin: 0 4px; }
            .energy-meter { width: 200px; height: 200px; }
        }

        /* Desktop Optimizations */
        @media (min-width: 769px) {
            #app { max-width: 420px; margin: 0 auto; }
            .energy-meter { width: 260px; height: 260px; }
        }
    </style>
</head>

<body class="font-inter">
    <!-- Main App Container -->
    <div id="app" class="max-w-md mx-auto relative min-h-screen">
        
        <!-- Onboarding Screens -->
        <div id="onboarding-container" class="onboarding-screen active">
            <!-- Slide 1: Smart Energy Management -->
            <div class="onboarding-slide active flex flex-col h-screen p-6 bg-gradient-to-br from-darkBg via-darkCard to-primary-900">
                <div class="flex-1 flex flex-col items-center justify-center text-center">
                    <div class="w-72 h-72 mb-8 flex items-center justify-center relative">
                        <div class="absolute inset-0 bg-gradient-to-br from-blue-400/20 to-blue-600/20 rounded-full animate-pulse"></div>
                        <div class="relative text-9xl">üì±</div>
                    </div>
                    <h2 class="text-4xl font-bold bg-gradient-to-r from-primary-400 to-accent-400 bg-clip-text text-transparent mb-6">Smart Energy Management</h2>
                    <p class="text-xl text-gray-300 leading-relaxed max-w-sm px-4">Take control of your electricity usage with AI-powered insights for Zimbabwe</p>
                </div>
                <div class="flex justify-between items-center">
                    <div class="flex space-x-2">
                        <div class="progress-dot active"></div>
                        <div class="progress-dot"></div>
                        <div class="progress-dot"></div>
                        <div class="progress-dot"></div>
                    </div>
                    <button onclick="nextOnboardingSlide()" class="btn-primary flex items-center gap-3">
                        Next <span class="text-xl">‚Üí</span>
                    </button>
                </div>
            </div>

            <!-- Slide 2: AI-Powered Forecasting -->
            <div class="onboarding-slide flex flex-col h-screen p-6 bg-gradient-to-br from-darkBg via-darkCard to-accent-900">
                <div class="flex-1 flex flex-col items-center justify-center text-center">
                    <div class="w-72 h-72 mb-8 flex items-center justify-center relative">
                        <div class="absolute inset-0 bg-gradient-to-br from-purple-400/20 to-purple-600/20 rounded-full animate-pulse"></div>
                        <div class="relative text-9xl">ü§ñ</div>
                    </div>
                    <h2 class="text-4xl font-bold bg-gradient-to-r from-primary-400 to-accent-400 bg-clip-text text-transparent mb-6">AI-Powered Forecasting</h2>
                    <p class="text-xl text-gray-300 leading-relaxed max-w-sm px-4">Get accurate predictions of when your power will run out with machine learning</p>
                </div>
                <div class="flex justify-between items-center">
                    <div class="flex space-x-2">
                        <div class="progress-dot"></div>
                        <div class="progress-dot active"></div>
                        <div class="progress-dot"></div>
                        <div class="progress-dot"></div>
                    </div>
                    <div class="flex gap-4">
                        <button onclick="prevOnboardingSlide()" class="btn-secondary flex items-center gap-2">
                            <span class="text-xl">‚Üê</span> Back
                        </button>
                        <button onclick="nextOnboardingSlide()" class="btn-primary flex items-center gap-3">
                            Next <span class="text-xl">‚Üí</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Slide 3: Seamless Recharging -->
            <div class="onboarding-slide flex flex-col h-screen p-6 bg-gradient-to-br from-darkBg via-darkCard to-secondary-900">
                <div class="flex-1 flex flex-col items-center justify-center text-center">
                    <div class="w-72 h-72 mb-8 flex items-center justify-center relative">
                        <div class="absolute inset-0 bg-gradient-to-br from-yellow-400/20 to-orange-600/20 rounded-full animate-pulse"></div>
                        <div class="relative text-9xl">üí≥</div>
                    </div>
                    <h2 class="text-4xl font-bold bg-gradient-to-r from-primary-400 to-secondary-400 bg-clip-text text-transparent mb-6">Seamless Recharging</h2>
                    <p class="text-xl text-gray-300 leading-relaxed max-w-sm px-4">Top up instantly with EcoCash & OneMoney integration and instant token delivery</p>
                </div>
                <div class="flex justify-between items-center">
                    <div class="flex space-x-2">
                        <div class="progress-dot"></div>
                        <div class="progress-dot"></div>
                        <div class="progress-dot active"></div>
                        <div class="progress-dot"></div>
                    </div>
                    <div class="flex gap-4">
                        <button onclick="prevOnboardingSlide()" class="btn-secondary flex items-center gap-2">
                            <span class="text-xl">‚Üê</span> Back
                        </button>
                        <button onclick="nextOnboardingSlide()" class="btn-primary flex items-center gap-3">
                            Next <span class="text-xl">‚Üí</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Slide 4: Device Setup -->
            <div class="onboarding-slide flex flex-col h-screen p-6 bg-gradient-to-br from-darkBg via-darkCard to-green-900">
                <div class="flex-1 flex flex-col justify-center">
                    <div class="text-center mb-8">
                        <div class="w-32 h-32 mx-auto mb-6 flex items-center justify-center relative">
                            <div class="absolute inset-0 bg-gradient-to-br from-green-400/20 to-green-600/20 rounded-full animate-pulse"></div>
                            <div class="relative text-6xl">‚ö°</div>
                        </div>
                        <h2 class="text-3xl font-bold bg-gradient-to-r from-primary-400 to-accent-400 bg-clip-text text-transparent mb-4">Setup Your Devices</h2>
                        <p class="text-lg text-gray-300 mb-8">Help us understand your energy usage by adding your household devices</p>
                    </div>

                    <div class="space-y-4 mb-8">
                        <div class="glass-card p-4">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <div class="w-12 h-12 bg-gradient-to-br from-red-400 to-red-600 rounded-xl flex items-center justify-center mr-4">
                                        <span class="text-white text-xl">üî•</span>
                                    </div>
                                    <div>
                                        <h4 class="font-semibold">Water Heater</h4>
                                        <p class="text-sm text-gray-400">High consumption device</p>
                                    </div>
                                </div>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" class="device-checkbox sr-only peer" data-device="water-heater">
                                    <div class="w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"></div>
                                </label>
                            </div>
                        </div>

                        <div class="glass-card p-4">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <div class="w-12 h-12 bg-gradient-to-br from-blue-400 to-blue-600 rounded-xl flex items-center justify-center mr-4">
                                        <span class="text-white text-xl">‚ùÑÔ∏è</span>
                                    </div>
                                    <div>
                                        <h4 class="font-semibold">Refrigerator</h4>
                                        <p class="text-sm text-gray-400">Continuous operation</p>
                                    </div>
                                </div>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" class="device-checkbox sr-only peer" data-device="refrigerator">
                                    <div class="w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"></div>
                                </label>
                            </div>
                        </div>

                        <div class="glass-card p-4">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <div class="w-12 h-12 bg-gradient-to-br from-purple-400 to-purple-600 rounded-xl flex items-center justify-center mr-4">
                                        <span class="text-white text-xl">üì∫</span>
                                    </div>
                                    <div>
                                        <h4 class="font-semibold">TV & Entertainment</h4>
                                        <p class="text-sm text-gray-400">Moderate usage</p>
                                    </div>
                                </div>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" class="device-checkbox sr-only peer" data-device="tv">
                                    <div class="w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"></div>
                                </label>
                            </div>
                        </div>

                        <div class="glass-card p-4">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <div class="w-12 h-12 bg-gradient-to-br from-yellow-400 to-yellow-600 rounded-xl flex items-center justify-center mr-4">
                                        <span class="text-white text-xl">üí°</span>
                                    </div>
                                    <div>
                                        <h4 class="font-semibold">Lighting</h4>
                                        <p class="text-sm text-gray-400">LED bulbs recommended</p>
                                    </div>
                                </div>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" class="device-checkbox sr-only peer" data-device="lighting">
                                    <div class="w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"></div>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="flex justify-between items-center">
                    <div class="flex space-x-2">
                        <div class="progress-dot"></div>
                        <div class="progress-dot"></div>
                        <div class="progress-dot"></div>
                        <div class="progress-dot active"></div>
                    </div>
                    <div class="flex gap-4">
                        <button onclick="prevOnboardingSlide()" class="btn-secondary flex items-center gap-2">
                            <span class="text-xl">‚Üê</span> Back
                        </button>
                        <button onclick="completeOnboarding()" class="btn-primary flex items-center gap-3">
                            Get Started <span class="text-xl">üöÄ</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Auth Screen -->
        <div id="auth-screen" class="screen min-h-screen flex flex-col p-6">
            <div class="flex-1 flex flex-col justify-center">
                <div class="text-center mb-8">
                    <div class="w-24 h-24 mx-auto mb-6 bg-gradient-to-br from-primary-500 to-accent-500 rounded-full flex items-center justify-center animate-pulse">
                        <svg class="w-12 h-12 text-white" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z" clip-rule="evenodd"></path>
                        </svg>
                    </div>
                    <h1 class="text-4xl font-bold bg-gradient-to-r from-primary-400 to-accent-400 bg-clip-text text-transparent mb-2">Welcome to EcoWatt</h1>
                    <p class="text-lg text-gray-300">Smart energy management for Zimbabwe</p>
                </div>

                <div class="glass-card p-6 mb-6">
                    <div class="mb-6">
                        <label class="block text-sm font-semibold text-gray-300 mb-3">Phone Number</label>
                        <div class="flex">
                            <div class="glass-card border-r-0 rounded-r-none px-4 flex items-center">
                                <span class="text-gray-300 font-mono">+263</span>
                            </div>
                            <input type="tel" id="phone-input" class="input-enhanced rounded-l-none border-l-0 flex-1" placeholder="77 123 4567">
                        </div>
                    </div>
                    <button id="send-otp-btn" class="btn-primary w-full">
                        <span class="mr-2">üì±</span> Send Verification Code
                    </button>
                </div>
            </div>
        </div>

        <!-- OTP Screen -->
        <div id="otp-screen" class="screen min-h-screen flex flex-col p-6">
            <div class="flex items-center mb-8">
                <button onclick="showScreen('auth-screen')" class="glass-card w-12 h-12 rounded-xl flex items-center justify-center mr-4">
                    <span class="text-primary-400 text-xl">‚Üê</span>
                </button>
                <h1 class="text-2xl font-bold">Verify Your Number</h1>
            </div>

            <div class="flex-1 flex flex-col justify-center">
                <div class="text-center mb-8">
                    <div class="w-24 h-24 bg-gradient-to-br from-primary-500 to-secondary-500 rounded-full flex items-center justify-center mx-auto mb-6 animate-pulse">
                        <span class="text-white text-2xl">üì±</span>
                    </div>
                    <h2 class="text-xl font-semibold mb-2">Enter Verification Code</h2>
                    <p class="text-gray-300">We sent a 4-digit code to <br><strong class="text-primary-400">+263 77 123 4567</strong></p>
                </div>

                <div class="glass-card p-8 mb-8">
                    <div class="flex justify-center gap-4 mb-8">
                        <input type="text" maxlength="1" class="otp-input w-16 h-20 text-center text-3xl font-bold rounded-xl border-2 border-gray-600 glass-card text-white input-enhanced">
                        <input type="text" maxlength="1" class="otp-input w-16 h-20 text-center text-3xl font-bold rounded-xl border-2 border-gray-600 glass-card text-white input-enhanced">
                        <input type="text" maxlength="1" class="otp-input w-16 h-20 text-center text-3xl font-bold rounded-xl border-2 border-gray-600 glass-card text-white input-enhanced">
                        <input type="text" maxlength="1" class="otp-input w-16 h-20 text-center text-3xl font-bold rounded-xl border-2 border-gray-600 glass-card text-white input-enhanced">
                    </div>
                    <button id="verify-otp-btn" class="btn-primary w-full">
                        <span class="mr-2">‚úì</span> Verify & Continue
                    </button>
                </div>

                <div class="text-center">
                    <p class="text-gray-400 mb-2">Didn't receive the code?</p>
                    <button class="text-primary-400 font-semibold">Resend Code (00:45)</button>
                </div>
            </div>
        </div>

        <!-- Home Screen -->
        <div id="home-screen" class="screen pb-24 pt-6">
            <!-- Header -->
            <header class="px-6 py-4 flex justify-between items-center mb-6">
                <div class="flex items-center">
                    <div class="w-14 h-14 bg-gradient-to-br from-primary-500 to-primary-600 rounded-2xl flex items-center justify-center mr-4 animate-pulse">
                        <svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z" clip-rule="evenodd"></path>
                        </svg>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold">EcoWatt</h1>
                        <p class="text-sm text-gray-400 font-medium">Good morning, User</p>
                    </div>
                </div>
                <div class="flex items-center gap-3">
                    <button id="connect-btn" class="glass-card px-3 py-2 text-sm rounded-lg font-semibold text-gray-300 flex items-center">
                        <span class="mr-1">üì∂</span> Connect
                    </button>
                    <button class="relative">
                        <div class="glass-card w-12 h-12 rounded-xl flex items-center justify-center">
                            <span class="text-gray-300 text-xl">üîî</span>
                        </div>
                        <span class="absolute -top-1 -right-1 w-6 h-6 bg-gradient-to-r from-primary-500 to-accent-500 rounded-full flex items-center justify-center text-xs font-bold text-white animate-pulse">3</span>
                    </button>
                </div>
            </header>

            <!-- Energy Balance Card -->
            <div class="px-6 mb-6">
                <div class="glass-card p-6">
                    <div class="text-center mb-6">
                        <h2 class="text-lg font-semibold text-gray-300 mb-2">Current Balance</h2>
                        
                        <!-- Enhanced Energy Meter -->
                        <div class="energy-meter">
                            <div class="meter-glow"></div>
                            <svg viewBox="0 0 200 200" class="w-full h-full relative z-10">
                                <defs>
                                    <linearGradient id="meter-gradient" x1="0%" y1="0%" x2="100%" y2="0%">
                                        <stop offset="0%" style="stop-color:#22c55e"></stop>
                                        <stop offset="50%" style="stop-color:#8b5cf6"></stop>
                                        <stop offset="100%" style="stop-color:#f59e0b"></stop>
                                    </linearGradient>
                                    <filter id="glow">
                                        <feGaussianBlur stdDeviation="4" result="coloredBlur"/>
                                        <feMerge><feMergeNode in="coloredBlur"/><feMergeNode in="SourceGraphic"/></feMerge>
                                    </filter>
                                </defs>
                                <circle cx="100" cy="100" r="85" stroke="rgba(255,255,255,0.1)" stroke-width="8" fill="none" stroke-dasharray="534"></circle>
                                <circle id="meter-progress" cx="100" cy="100" r="85" stroke="url(#meter-gradient)" stroke-width="8" fill="none" 
                                        stroke-dasharray="534" stroke-dashoffset="400" transform="rotate(-90 100 100)" 
                                        stroke-linecap="round" filter="url(#glow)"></circle>
                                
                                <text x="100" y="85" text-anchor="middle" font-size="32" font-weight="bold" fill="white" font-family="monospace">8.42</text>
                                <text x="100" y="105" text-anchor="middle" font-size="14" fill="#22c55e">kWh</text>
                                <text x="100" y="125" text-anchor="middle" font-size="12" fill="#888">remaining</text>
                            </svg>
                        </div>
                        
                        <div class="flex items-center justify-center">
                            <div class="glass-card px-4 py-2 rounded-full border border-secondary-500/30">
                                <p class="text-secondary-400 font-semibold flex items-center">
                                    <span class="mr-2">‚è∞</span> 
                                    Est. <span class="mx-1 font-bold text-secondary-300">3 days</span> remaining
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="px-6 mb-6">
                <div class="flex gap-3">
                    <button id="show-recharge-btn" class="btn-primary flex-1">
                        <span class="mr-2">‚ö°</span> Recharge Now
                    </button>
                    <button id="emergency-credit-btn" class="glass-card px-4 py-4 rounded-xl border-red-500/30 hover:bg-red-500/20">
                        <span class="text-red-400 text-xl">‚ö†Ô∏è</span>
                    </button>
                </div>
            </div>

            <!-- Dashboard Cards -->
            <div class="px-6 mb-6">
                <div class="grid grid-cols-2 gap-4">
                    <div class="glass-card p-4">
                        <div class="flex items-center justify-between mb-3">
                            <h3 class="text-sm font-semibold text-gray-300">Today's Usage</h3>
                            <div class="w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center">
                                <span class="text-white text-xl">üìä</span>
                            </div>
                        </div>
                        <div class="flex items-baseline mb-2">
                            <span class="text-2xl font-bold text-white font-mono">1.2</span>
                            <span class="text-sm text-gray-400 ml-1">kWh</span>
                        </div>
                        <div class="w-full bg-gray-800 rounded-full h-2 overflow-hidden">
                            <div class="h-full bg-gradient-to-r from-blue-500 to-cyan-400 rounded-full transition-all duration-1000 ease-out" style="width: 35%"></div>
                        </div>
                        <p class="text-xs text-gray-400 mt-2">35% of daily average</p>
                    </div>

                    <div class="glass-card p-4">
                        <div class="flex items-center justify-between mb-3">
                            <h3 class="text-sm font-semibold text-gray-300">Monthly Budget</h3>
                            <div class="w-10 h-10 bg-gradient-to-br from-secondary-500 to-secondary-600 rounded-lg flex items-center justify-center">
                                <span class="text-white text-xl">üí≥</span>
                            </div>
                        </div>
                        <div class="flex items-baseline mb-2">
                            <span class="text-2xl font-bold text-white font-mono">$25</span>
                            <span class="text-sm text-gray-400 ml-1">ZWL</span>
                        </div>
                        <div class="w-full bg-gray-800 rounded-full h-2 overflow-hidden">
                            <div class="h-full bg-gradient-to-r from-secondary-500 to-yellow-400 rounded-full transition-all duration-1000 ease-out" style="width: 70%"></div>
                        </div>
                        <p class="text-xs text-gray-400 mt-2">$17.50 remaining</p>
                    </div>
                </div>
            </div>

            <!-- Alert Section -->
            <div class="px-6 mb-6">
                <div class="glass-card bg-gradient-to-r from-secondary-500/20 to-orange-500/20 border-l-4 border-secondary-500 p-4">
                    <div class="flex items-start">
                        <div class="w-12 h-12 bg-secondary-500 rounded-xl flex items-center justify-center mr-3 animate-pulse">
                            <span class="text-white text-xl">‚ö†Ô∏è</span>
                        </div>
                        <div>
                            <h3 class="font-semibold text-secondary-300 mb-1">Low Balance Alert</h3>
                            <p class="text-sm text-gray-300 mb-2">Your current usage suggests power will run out in 3 days. Consider recharging soon.</p>
                            <button class="text-secondary-400 text-sm font-semibold">View Recommendations ‚Üí</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quick Actions Grid -->
            <div class="px-6 mb-6">
                <h2 class="text-lg font-semibold mb-4">Quick Actions</h2>
                <div class="grid grid-cols-4 gap-3">
                    <button id="show-forecast-btn" class="glass-card flex flex-col items-center py-4 px-2">
                        <div class="w-12 h-12 bg-gradient-to-br from-primary-500 to-primary-600 rounded-xl flex items-center justify-center mb-2">
                            <span class="text-white text-xl">üìà</span>
                        </div>
                        <span class="text-xs text-center text-gray-300 font-medium">Forecast</span>
                    </button>

                    <button id="show-budget-btn" class="glass-card flex flex-col items-center py-4 px-2">
                        <div class="w-12 h-12 bg-gradient-to-br from-secondary-500 to-secondary-600 rounded-xl flex items-center justify-center mb-2">
                            <span class="text-white text-xl">üí≥</span>
                        </div>
                        <span class="text-xs text-center text-gray-300 font-medium">Budget</span>
                    </button>

                    <button id="show-devices-btn" class="glass-card flex flex-col items-center py-4 px-2">
                        <div class="w-12 h-12 bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl flex items-center justify-center mb-2">
                            <span class="text-white text-xl">‚ö°</span>
                        </div>
                        <span class="text-xs text-center text-gray-300 font-medium">Devices</span>
                    </button>

                    <button id="show-settings-btn" class="glass-card flex flex-col items-center py-4 px-2">
                        <div class="w-12 h-12 bg-gradient-to-br from-gray-500 to-gray-600 rounded-xl flex items-center justify-center mb-2">
                            <span class="text-white text-xl">‚öôÔ∏è</span>
                        </div>
                        <span class="text-xs text-center text-gray-300 font-medium">Settings</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Usage/Forecast Screen -->
        <div id="usage-screen" class="screen p-6 pb-24">
            <div class="flex items-center mb-6">
                <button onclick="showScreen('home-screen')" class="glass-card w-12 h-12 rounded-xl flex items-center justify-center mr-4">
                    <span class="text-primary-400 text-xl">‚Üê</span>
                </button>
                <h1 class="text-2xl font-bold">Usage Analytics</h1>
            </div>

            <div class="glass-card p-6 mb-6">
                <h2 class="text-lg font-semibold mb-4">7-Day Forecast</h2>
                <div class="bg-gray-800/50 rounded-xl p-4 h-48 flex items-center justify-center">
                    <p class="text-gray-400">üìä Interactive usage chart would go here</p>
                </div>
            </div>

            <div class="grid grid-cols-2 gap-4 mb-6">
                <div class="glass-card p-4">
                    <h3 class="text-sm font-semibold text-gray-300 mb-2">Daily Average</h3>
                    <div class="text-2xl font-bold text-primary-400">2.3 kWh</div>
                </div>
                <div class="glass-card p-4">
                    <h3 class="text-sm font-semibold text-gray-300 mb-2">This Month</h3>
                    <div class="text-2xl font-bold text-secondary-400">68 kWh</div>
                </div>
            </div>
        </div>

        <!-- Budget Screen -->
        <div id="budget-screen" class="screen p-6 pb-24">
            <div class="flex items-center mb-6">
                <button onclick="showScreen('home-screen')" class="glass-card w-12 h-12 rounded-xl flex items-center justify-center mr-4">
                    <span class="text-primary-400 text-xl">‚Üê</span>
                </button>
                <h1 class="text-2xl font-bold">Budget Management</h1>
            </div>

            <div class="glass-card p-6 mb-6">
                <h2 class="text-lg font-semibold mb-4">Monthly Budget</h2>
                <div class="mb-4">
                    <div class="flex justify-between mb-2">
                        <span>Current: $32.50 ZWL</span>
                        <span>Target: $50 ZWL</span>
                    </div>
                    <div class="w-full bg-gray-800 rounded-full h-3">
                        <div class="bg-gradient-to-r from-primary-500 to-primary-600 h-3 rounded-full" style="width: 65%"></div>
                    </div>
                </div>
                <p class="text-sm text-gray-400">You're on track to meet your monthly budget</p>
            </div>
        </div>

        <!-- Devices Screen -->
        <div id="devices-screen" class="screen p-6 pb-24">
            <div class="flex items-center mb-6">
                <button onclick="showScreen('home-screen')" class="glass-card w-12 h-12 rounded-xl flex items-center justify-center mr-4">
                    <span class="text-primary-400 text-xl">‚Üê</span>
                </button>
                <h1 class="text-2xl font-bold">Household Devices</h1>
            </div>

            <div id="devices-list" class="space-y-4 mb-6">
                <!-- Devices will be populated by JavaScript based on onboarding selections -->
            </div>

            <button class="btn-primary w-full">
                <span class="mr-2">‚ûï</span> Add New Device
            </button>
        </div>

        <!-- Settings Screen -->
        <div id="settings-screen" class="screen p-6 pb-24">
            <div class="flex items-center mb-6">
                <button onclick="showScreen('home-screen')" class="glass-card w-12 h-12 rounded-xl flex items-center justify-center mr-4">
                    <span class="text-primary-400 text-xl">‚Üê</span>
                </button>
                <h1 class="text-2xl font-bold">Settings</h1>
            </div>

            <div class="space-y-4">
                <div class="glass-card p-4">
                    <h3 class="font-semibold mb-2">Account</h3>
                    <p class="text-gray-400">+263 77 123 4567</p>
                </div>

                <div class="glass-card p-4">
                    <h3 class="font-semibold mb-2">Notifications</h3>
                    <div class="flex items-center justify-between">
                        <span>Push Notifications</span>
                        <label class="relative inline-flex items-center cursor-pointer">
                            <input type="checkbox" checked class="sr-only peer">
                            <div class="w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"></div>
                        </label>
                    </div>
                </div>

                <button class="glass-card p-4 w-full text-left">
                    <h3 class="font-semibold text-red-400">Logout</h3>
                </button>
            </div>
        </div>

        <!-- Navigation Bar -->
        <nav class="fixed bottom-0 left-0 right-0 max-w-md mx-auto glass-card border-t border-white/10 z-50 rounded-t-2xl">
            <div class="px-4 py-2">
                <div class="flex justify-between">
                    <button id="nav-home" class="nav-item active flex flex-col items-center py-3 px-4">
                        <span class="text-xl">üè†</span>
                        <span class="text-xs mt-1 font-medium">Home</span>
                    </button>
                    <button id="nav-usage" class="nav-item flex flex-col items-center py-3 px-4">
                        <span class="text-xl">üìä</span>
                        <span class="text-xs mt-1 font-medium">Usage</span>
                    </button>
                    <button id="nav-budget" class="nav-item flex flex-col items-center py-3 px-4">
                        <span class="text-xl">üí≥</span>
                        <span class="text-xs mt-1 font-medium">Budget</span>
                    </button>
                    <button id="nav-profile" class="nav-item flex flex-col items-center py-3 px-4">
                        <span class="text-xl">üë§</span>
                        <span class="text-xs mt-1 font-medium">Profile</span>
                    </button>
                </div>
            </div>
        </nav>
    </div>

    <!-- Toast Container -->
    <div id="toast-container" class="fixed bottom-24 left-1/2 transform -translate-x-1/2 z-50"></div>

    <!-- JavaScript -->
    <script>
        console.log('üöÄ EcoWatt PWA - Professional Edition Starting...');

        class EcoWattApp {
            constructor() {
                this.currentScreen = 'onboarding';
                this.currentSlide = 0;
                this.isFirstTime = !localStorage.getItem('ecowatt_onboarded');
                this.selectedDevices = [];
                console.log('‚úÖ EcoWatt Professional App Initialized');
                this.init();
            }

            init() {
                console.log('üîß Initializing professional app...');
                this.setupEventListeners();
                this.checkFirstTime();
            }

            checkFirstTime() {
                if (this.isFirstTime) {
                    this.showOnboarding();
                } else {
                    this.showScreen('home-screen');
                }
            }

            showOnboarding() {
                console.log('üëã Showing professional onboarding...');
                const onboarding = document.getElementById('onboarding-container');
                if (onboarding) {
                    onboarding.classList.add('active');
                }
            }

            showScreen(screenId) {
                console.log('üì± Showing screen:', screenId);
                
                document.querySelectorAll('.screen').forEach(screen => {
                    screen.classList.remove('active');
                });

                const onboarding = document.getElementById('onboarding-container');
                if (onboarding) {
                    onboarding.classList.remove('active');
                }

                const targetScreen = document.getElementById(screenId);
                if (targetScreen) {
                    targetScreen.classList.add('active');
                } else {
                    console.error('‚ùå Screen not found:', screenId);
                }

                this.currentScreen = screenId;
                this.updateNavigation(screenId);
            }

            updateNavigation(screenId) {
                const navItems = document.querySelectorAll('.nav-item');
                navItems.forEach(item => item.classList.remove('active'));
                
                const navMap = {
                    'home-screen': 'nav-home',
                    'usage-screen': 'nav-usage', 
                    'budget-screen': 'nav-budget',
                    'settings-screen': 'nav-profile'
                };

                if (navMap[screenId]) {
                    document.getElementById(navMap[screenId]).classList.add('active');
                }
            }

            setupEventListeners() {
                console.log('üéß Setting up event listeners...');
                
                // Auth flow
                const sendOtpBtn = document.getElementById('send-otp-btn');
                if (sendOtpBtn) {
                    sendOtpBtn.addEventListener('click', () => {
                        this.showScreen('otp-screen');
                        this.showToast('Verification code sent!', 'success');
                    });
                }

                const verifyOtpBtn = document.getElementById('verify-otp-btn');
                if (verifyOtpBtn) {
                    verifyOtpBtn.addEventListener('click', () => {
                        localStorage.setItem('ecowatt_onboarded', 'true');
                        this.showScreen('home-screen');
                        this.showToast('Welcome to EcoWatt!', 'success');
                    });
                }

                // Navigation
                const navMap = {
                    'nav-home': 'home-screen',
                    'nav-usage': 'usage-screen',
                    'nav-budget': 'budget-screen', 
                    'nav-profile': 'settings-screen'
                };

                Object.keys(navMap).forEach(navId => {
                    const navBtn = document.getElementById(navId);
                    if (navBtn) {
                        navBtn.addEventListener('click', () => {
                            this.showScreen(navMap[navId]);
                        });
                    }
                });

                // Quick actions
                const quickActions = {
                    'show-recharge-btn': () => this.showToast('üöÄ Recharge feature coming soon!\n\n‚úÖ EcoCash integration\n‚úÖ OneMoney support\n‚úÖ Instant token delivery', 'info', 4000),
                    'show-forecast-btn': () => this.showScreen('usage-screen'),
                    'show-budget-btn': () => this.showScreen('budget-screen'),
                    'show-devices-btn': () => this.showScreen('devices-screen'),
                    'show-settings-btn': () => this.showScreen('settings-screen')
                };

                Object.keys(quickActions).forEach(btnId => {
                    const btn = document.getElementById(btnId);
                    if (btn) {
                        btn.addEventListener('click', quickActions[btnId]);
                    }
                });

                // OTP inputs
                this.setupOTPInputs();

                // Device selection
                this.setupDeviceSelection();
            }

            setupOTPInputs() {
                const otpInputs = document.querySelectorAll('.otp-input');
                otpInputs.forEach((input, index) => {
                    input.addEventListener('input', (e) => {
                        if (e.target.value.length === 1 && index < otpInputs.length - 1) {
                            otpInputs[index + 1].focus();
                        }
                        
                        if (index === otpInputs.length - 1 && e.target.value.length === 1) {
                            const otp = Array.from(otpInputs).map(input => input.value).join('');
                            if (otp.length === 4) {
                                setTimeout(() => {
                                    document.getElementById('verify-otp-btn').click();
                                }, 300);
                            }
                        }
                    });

                    input.addEventListener('keydown', (e) => {
                        if (e.key === 'Backspace' && e.target.value.length === 0 && index > 0) {
                            otpInputs[index - 1].focus();
                        }
                    });
                });
            }

            setupDeviceSelection() {
                const deviceCheckboxes = document.querySelectorAll('.device-checkbox');
                deviceCheckboxes.forEach(checkbox => {
                    checkbox.addEventListener('change', (e) => {
                        const device = e.target.dataset.device;
                        if (e.target.checked) {
                            if (!this.selectedDevices.includes(device)) {
                                this.selectedDevices.push(device);
                            }
                        } else {
                            this.selectedDevices = this.selectedDevices.filter(d => d !== device);
                        }
                        console.log('Selected devices:', this.selectedDevices);
                    });
                });
            }

            populateDevicesScreen() {
                const devicesList = document.getElementById('devices-list');
                if (!devicesList) return;

                const deviceData = {
                    'water-heater': { name: 'Water Heater', icon: 'üî•', consumption: '2.4 kWh/day', color: 'from-red-400 to-red-600' },
                    'refrigerator': { name: 'Refrigerator', icon: '‚ùÑÔ∏è', consumption: '1.5 kWh/day', color: 'from-blue-400 to-blue-600' },
                    'tv': { name: 'TV & Entertainment', icon: 'üì∫', consumption: '0.8 kWh/day', color: 'from-purple-400 to-purple-600' },
                    'lighting': { name: 'Lighting', icon: 'üí°', consumption: '0.5 kWh/day', color: 'from-yellow-400 to-yellow-600' }
                };

                devicesList.innerHTML = '';
                this.selectedDevices.forEach(device => {
                    const data = deviceData[device];
                    if (data) {
                        const deviceCard = document.createElement('div');
                        deviceCard.className = 'device-card';
                        deviceCard.innerHTML = `
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <div class="w-12 h-12 bg-gradient-to-br ${data.color} rounded-xl flex items-center justify-center mr-4">
                                        <span class="text-white text-xl">${data.icon}</span>
                                    </div>
                                    <div>
                                        <h4 class="font-semibold">${data.name}</h4>
                                        <p class="text-sm text-gray-400">${data.consumption}</p>
                                    </div>
                                </div>
                                <button class="glass-card px-3 py-2 rounded-lg text-sm">Manage</button>
                            </div>
                        `;
                        devicesList.appendChild(deviceCard);
                    }
                });

                if (this.selectedDevices.length === 0) {
                    devicesList.innerHTML = '<div class="glass-card p-6 text-center"><p class="text-gray-400">No devices configured yet</p></div>';
                }
            }

            showToast(message, type = 'info', duration = 3000) {
                const toast = document.createElement('div');
                toast.className = `toast ${type}`;
                toast.innerHTML = `
                    <div class="flex items-center">
                        <div class="mr-3">
                            ${type === 'success' ? '‚úÖ' : type === 'error' ? '‚ùå' : '‚ÑπÔ∏è'}
                        </div>
                        <div class="flex-1">${message.replace(/\n/g, '<br>')}</div>
                    </div>
                `;

                const container = document.getElementById('toast-container');
                container.appendChild(toast);

                requestAnimationFrame(() => {
                    toast.classList.add('show');
                });

                setTimeout(() => {
                    toast.classList.remove('show');
                    setTimeout(() => {
                        if (toast.parentNode) {
                            toast.parentNode.removeChild(toast);
                        }
                    }, 400);
                }, duration);
            }
        }

        // Global onboarding functions
        let currentSlide = 0;

        window.nextOnboardingSlide = function() {
            console.log('‚û°Ô∏è Next slide');
            const slides = document.querySelectorAll('.onboarding-slide');
            if (currentSlide < slides.length - 1) {
                slides[currentSlide].classList.remove('active');
                currentSlide++;
                slides[currentSlide].classList.add('active');
            }
        };

        window.prevOnboardingSlide = function() {
            console.log('‚¨ÖÔ∏è Previous slide');
            const slides = document.querySelectorAll('.onboarding-slide');
            if (currentSlide > 0) {
                slides[currentSlide].classList.remove('active');
                currentSlide--;
                slides[currentSlide].classList.add('active');
            }
        };

        window.completeOnboarding = function() {
            console.log('üéâ Onboarding completed');
            localStorage.setItem('ecowatt_onboarded', 'true');
            window.ecoWattApp.populateDevicesScreen();
            window.ecoWattApp.showScreen('auth-screen');
        };

        window.showScreen = function(screenId) {
            if (window.ecoWattApp) {
                window.ecoWattApp.showScreen(screenId);
            }
        };

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ DOM Content Loaded - Starting Professional EcoWatt PWA...');
            
            try {
                window.ecoWattApp = new EcoWattApp();
                console.log('‚úÖ EcoWatt Professional PWA Initialized Successfully');
            } catch (error) {
                console.error('‚ùå Failed to initialize EcoWatt PWA:', error);
            }
        });

        console.log('üìù EcoWatt Professional PWA script loaded successfully');
    </script>
</body>
</html>
